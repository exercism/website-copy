This solution uses an if statement, but all of the conditional logic is small
enough that we can better express it inside a ternary expression.